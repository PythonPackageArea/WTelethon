# Примеры использования WTelethon

Данная директория содержит профессиональные примеры использования библиотеки WTelethon.

## Структура примеров

### service_example - Сервисный пример
Демонстрирует работу с одним клиентом через API, подходит для сервисных решений.

**Ключевые особенности:**
- Получение данных клиента через API моккинг
- Автоматическая смена прокси при ошибках подключения
- Отправка статистики обратно в API
- Техническое логирование для разработчика
- Бесконечный цикл обработки

**Файлы:**
- `main.py` - точка входа в приложение
- `api_mock.py` - имитация API для получения данных сессий и прокси
- `proccess.py` - основная логика обработки клиента
- `handlers.py` - обработчики ошибок подключения
- `proxy_loader.py` - загрузчик прокси из API
- `logging_config.py` - конфигурация технического логирования

### software_example - Пример программы  
Демонстрирует работу с множеством клиентов из файлов, подходит для desktop приложений.

**Ключевые особенности:**
- Загрузка клиентов из локальных session файлов
- Работа с JSON аттачментами
- Пул клиентов с автоматическим распределением нагрузки
- Автоматическая обработка "мертвых" сессий
- Пользовательское логирование для новичков
- Конфигурация через переменные окружения

**Файлы:**
- `main.py` - точка входа в приложение
- `config.py` - конфигурация приложения
- `loader.py` - загрузчик клиентов из файлов  
- `proccess.py` - основная логика обработки клиентов
- `handlers.py` - обработчики ошибок
- `logging_config.py` - конфигурация пользовательского логирования

## Запуск примеров

### Подготовка данных
1. Поместите session файлы в `examples/data/sessions/alive/`
2. Поместите прокси в `examples/data/proxies.txt` (формат: host:port:username:password)
3. Настройте API данные в config.py или переменных окружения

### Запуск service_example
```bash
cd examples/service_example
python main.py
```

### Запуск software_example  
```bash
cd examples/software_example
python main.py
```

## Архитектурные принципы

Все примеры следуют стиль-гайду проекта:
- **SOLID принципы** - разделение ответственности между модулями
- **Clean Architecture** - четкая структура зависимостей
- **Type Safety** - использование type hints везде
- **Error Handling** - правильная обработка исключений без print в бизнес-логике
- **Configuration** - централизованная конфигурация через config.py и .env

## Настройка для продакшена

Для использования в продакшене:
1. Замените `ApiMock` на реальный API клиент
2. Настройте уровни логирования (для service_example: DEBUG/INFO, для software_example: INFO/WARNING)
3. Настройте мониторинг и метрики
4. Добавьте graceful shutdown
5. Настройте переменные окружения

## Логирование

### service_example - Техническое логирование
- Подробные логи с тимстампами и уровнями
- Сохранение логов в файл service.log
- DEBUG для отладки, INFO для общей информации
- Детальная информация о API запросах и обработке ошибок

### software_example - Пользовательское логирование
- Простые сообщения на русском языке
- Цветовая индикация (✓ для успеха, ⚠ для предупреждений, ✗ для ошибок)
- Понятные объяснения что делает программа
- Рекомендации по устранению проблем
